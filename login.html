<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Login / Signup</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
<header>
  <h1>ðŸ”‘ Account</h1>
  <nav>
    <a href="index.html">Stats</a>
    <a href="catalogue.html">Catalogue</a>
    <a href="settings.html">Settings</a>
  </nav>
</header>

<main>
  <div class="card login-card">
    <h2>Welcome</h2>
    <p>Sign in or create an account to save your board games.</p>

    <input id="email" type="email" placeholder="Email" required>
    <input id="password" type="password" placeholder="Password" required>

    <div style="display:flex; gap:1rem; margin-top:1rem;">
      <button id="loginBtn">Login</button>
      <button id="signupBtn">Sign Up</button>
    </div>

    <div id="loginMessage" style="margin-top:1rem; color:red; opacity:0.8;"></div>
  </div>
</main>

<script type="module">
import { signIn, signUp } from "./firebase.js";

const emailInput = document.getElementById("email");
const passwordInput = document.getElementById("password");
const loginBtn = document.getElementById("loginBtn");
const signupBtn = document.getElementById("signupBtn");
const message = document.getElementById("loginMessage");

async function handleLogin() {
  message.textContent = "";
  try {
    await signIn(emailInput.value.trim(), passwordInput.value.trim());
    location.href = "catalogue.html"; // Redirect after login
  } catch (err) {
    message.textContent = err.message;
  }
}

async function handleSignup() {
  message.textContent = "";
  try {
    await signUp(emailInput.value.trim(), passwordInput.value.trim());
    location.href = "catalogue.html"; // Redirect after signup
  } catch (err) {
    message.textContent = err.message;
  }
}

loginBtn.addEventListener("click", handleLogin);
signupBtn.addEventListener("click", handleSignup);

// Optional: Press Enter to submit
emailInput.addEventListener("keyup", e => e.key === "Enter" && handleLogin());
passwordInput.addEventListener("keyup", e => e.key === "Enter" && handleLogin());
</script>
</body>
</html>
